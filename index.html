<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>AI Music Converter</title>
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<style>
body{
 background:#0b1220;
 color:#fff;
 font-family:system-ui;
 margin:0;
}
.container{
 max-width:430px;
 margin:auto;
 padding:20px;
}
h1{margin-bottom:5px}
p{opacity:.8}

input,select,button{
 width:100%;
 padding:14px;
 margin-top:12px;
 border-radius:12px;
 border:none;
 font-size:16px;
}
button{
 background:#00ffd5;
 color:#000;
 font-weight:700;
}

audio{width:100%;margin-top:15px}

#loader{
 display:none;
 margin-top:20px;
 text-align:center;
}
.spin{
 width:42px;height:42px;
 border:4px solid #333;
 border-top:4px solid #00ffd5;
 border-radius:50%;
 animation:spin 1s linear infinite;
 margin:auto;
}
@keyframes spin{100%{transform:rotate(360deg)}}

.section{margin-top:40px;font-size:14px;opacity:.9}
footer{text-align:center;margin:40px 0;font-size:13px;opacity:.7}
hr{opacity:.2}
</style>
</head>

<body>
<div class="container">

<h1>ğŸµ AI Music Converter</h1>
<p>Slow â€¢ Fast â€¢ Lofi â€¢ EDM â€¢ Chill</p>

<input type="file" id="file" accept="audio/*">

<select id="mode">
<option value="slow">ğŸ¢ Slow</option>
<option value="fast">âš¡ Fast</option>
<option value="lofi">ğŸ§ Lofi</option>
<option value="edm">ğŸ”¥ EDM</option>
<option value="chill">ğŸŒ™ Chill</option>
</select>

<button onclick="convert()">Convert</button>
<button onclick="download()">Download</button>
<button id="installBtn" style="display:none">ğŸ“² Install App</button>
<button onclick="shareApp()">ğŸ”— Share</button>

<div id="loader">
 <div class="spin"></div>
 <p>Please waitâ€¦ Audio processing</p>
</div>

<audio id="player" controls></audio>

<hr>

<div class="section">
<h3>About</h3>
<p>
This tool converts user-uploaded audio into Slow, Fast, Lofi, EDM and Chill styles.
All processing happens inside your browser.
</p>
</div>

<div class="section">
<h3>Privacy Policy</h3>
<p>
We do not upload, store or track any audio files.
Everything runs locally on your device.
</p>
</div>

<div class="section">
<h3>Terms & Disclaimer</h3>
<p>
Upload only content you own or have permission to use.
This tool does not host or distribute copyrighted files.
GitHub Pages compliant.
</p>
</div>

<div class="section">
<h3>Contact</h3>
<p>
For support, please use GitHub repository issues.
</p>
</div>

<footer>Â© 2026 AI Music Converter</footer>

</div>

<script>
let outputBlob;

async function convert(){
 try{
  const file = document.getElementById("file").files[0];
  if(!file){ alert("à¤ªà¤¹à¤²à¥‡ audio upload à¤•à¤°à¥‹"); return; }

  loader(true);

  const audioCtx = new AudioContext();
  const buffer = await audioCtx.decodeAudioData(await file.arrayBuffer());

  const offlineCtx = new OfflineAudioContext(
    buffer.numberOfChannels,
    buffer.length,
    buffer.sampleRate
  );

  const source = offlineCtx.createBufferSource();
  source.buffer = buffer;

  const mode = document.getElementById("mode").value;

  if(mode==="slow") source.playbackRate.value = 0.7;
  if(mode==="fast") source.playbackRate.value = 1.4;

  let node = source;

  if(mode==="lofi" || mode==="chill"){
    const lowpass = offlineCtx.createBiquadFilter();
    lowpass.type = "lowpass";
    lowpass.frequency.value = mode==="chill" ? 600 : 1000;
    node.connect(lowpass);
    node = lowpass;
  }

  if(mode==="edm"){
    const bass = offlineCtx.createBiquadFilter();
    bass.type = "lowshelf";
    bass.frequency.value = 120;
    bass.gain.value = 10;
    node.connect(bass);
    node = bass;
  }

  node.connect(offlineCtx.destination);
  source.start(0);

  const rendered = await offlineCtx.startRendering();
  outputBlob = bufferToWav(rendered);

  document.getElementById("player").src =
    URL.createObjectURL(outputBlob);

  loader(false);

 }catch(e){
  loader(false);
  alert("Audio convert failed. Try another file.");
 }
}

function loader(show){
 document.getElementById("loader").style.display =
  show ? "block" : "none";
}

function download(){
 if(!outputBlob){
  alert("à¤ªà¤¹à¤²à¥‡ convert à¤•à¤°à¥‹");
  return;
 }
 const a = document.createElement("a");
 a.href = URL.createObjectURL(outputBlob);
 a.download = "AI_Music_Converted.wav";
 a.click();
}

function bufferToWav(buffer){
 const ch = buffer.numberOfChannels;
 const length = buffer.length * ch * 2;
 const arrayBuffer = new ArrayBuffer(44 + length);
 const view = new DataView(arrayBuffer);
 let offset = 0;

 const write = s => {
  for(let i=0;i<s.length;i++)
   view.setUint8(offset++, s.charCodeAt(i));
 };

 write("RIFF");
 view.setUint32(offset,36+length,true); offset+=4;
 write("WAVEfmt ");
 view.setUint32(offset,16,true); offset+=4;
 view.setUint16(offset,1,true); offset+=2;
 view.setUint16(offset,ch,true); offset+=2;
 view.setUint32(offset,buffer.sampleRate,true); offset+=4;
 view.setUint32(offset,buffer.sampleRate*ch*2,true); offset+=4;
 view.setUint16(offset,ch*2,true); offset+=2;
 view.setUint16(offset,16,true); offset+=2;
 write("data");
 view.setUint32(offset,length,true); offset+=4;

 for(let i=0;i<buffer.length;i++){
  for(let j=0;j<ch;j++){
   let sample = buffer.getChannelData(j)[i];
   sample = Math.max(-1, Math.min(1, sample));
   view.setInt16(offset, sample*32767, true);
   offset+=2;
  }
 }

 return new Blob([view],{type:"audio/wav"});
}

/* PWA install */
let deferredPrompt;
window.addEventListener("beforeinstallprompt", e=>{
 e.preventDefault();
 deferredPrompt=e;
 document.getElementById("installBtn").style.display="block";
});

document.getElementById("installBtn").onclick = async ()=>{
 deferredPrompt.prompt();
 await deferredPrompt.userChoice;
 deferredPrompt=null;
};

/* Share */
function shareApp(){
 if(navigator.share){
  navigator.share({
   title:"AI Music Converter",
   text:"Free AI Music Converter â€“ Slow, Fast, Lofi, EDM, Chill",
   url:location.href
  });
 }else{
  alert("Sharing not supported");
 }
}
</script>

</body>
</html>
